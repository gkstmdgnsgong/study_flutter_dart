//166p

ì§ˆë¬¸ : Element ê°ì²´ì— ëŒ€í•´ ìƒì„¸íˆ ì•Œê³  ì‹¶ì–´ 

https://coaspe.tistory.com/81

ë¬¼ë¡ ì…ë‹ˆë‹¤. ì•„ë˜ëŠ” ì£¼ì–´ì§„ ê¸€ì„ ë§ˆí¬ë‹¤ìš´(Markdown) í˜•ì‹ìœ¼ë¡œ ë³´ê¸° ì¢‹ê²Œ ì •ë¦¬í•œ ê²ƒì…ë‹ˆë‹¤. ë‚´ìš©ì€ ë³€ê²½í•˜ì§€ ì•Šê³ , ê°€ë…ì„± í–¥ìƒì„ ìœ„í•´ ì œëª©, ì†Œì œëª©, ë¦¬ìŠ¤íŠ¸, ì½”ë“œ ë¸”ë¡ ë“±ì„ ì ì ˆíˆ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.

---

# Flutter - Element

> *ì‘ì„±ì: aspe | ì‘ì„±ì¼: 2023. 2. 17. 13:57*

---

## ê°œìš”

**Element**ëŠ” íŠ¸ë¦¬ì˜ íŠ¹ì • ìœ„ì¹˜ì— ìˆëŠ” ì¸ìŠ¤í„´ìŠ¤í™”ëœ Widgetì…ë‹ˆë‹¤.
ìœ„ì ¯ì€ ì„œë¸ŒíŠ¸ë¦¬ë¥¼ ì–´ë–»ê²Œ êµ¬ì„±í• ì§€ë¥¼ ë¬˜ì‚¬í•˜ì§€ë§Œ, **ìœ„ì ¯ì€ ë¶ˆë³€**ì´ê¸° ë•Œë¬¸ì— ë‹¤ìˆ˜ì˜ ì„œë¸ŒíŠ¸ë¦¬ë¥¼ ë™ì‹œì— êµ¬ì„±í•˜ê¸° ìœ„í•´ ë™ì¼í•œ ìœ„ì ¯ë“¤ì´ ì‚¬ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**ElementëŠ” ìœ„ì ¯ì„ ì‚¬ìš©í•˜ì—¬ íŠ¸ë¦¬ì—ì„œ íŠ¹ì • ìœ„ì¹˜ë¥¼ êµ¬ì„±í•˜ëŠ” ê²ƒì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.**
ì˜ˆë¥¼ ë“¤ì–´ ìƒìœ„ ìœ„ì ¯ì´ ì¬êµ¬ì„±ë˜ê³  ì´ ìœ„ì¹˜ì— ëŒ€í•œ ìƒˆ ìœ„ì ¯ì„ ë§Œë“œëŠ” ê²½ìš°, ì§€ì •ëœ Elementì™€ ì—°ê´€ëœ ìœ„ì ¯ì´ ì‹œê°„ì´ ì§€ë‚¨ì— ë”°ë¼ ë³€ê²½ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ElementsëŠ” íŠ¸ë¦¬ë¥¼ í˜•ì„±í•˜ë©°, ëŒ€ë¶€ë¶„ì˜ ElementsëŠ” ê³ ìœ í•œ ìì‹ì„ ê°€ì§€ì§€ë§Œ, ì¼ë¶€ ìœ„ì ¯ì€ ë‹¤ìˆ˜ì˜ ìì‹ì„ ê°€ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. (ì˜ˆ: `RenderObjectElement`ì˜ ì„œë¸Œí´ë˜ìŠ¤ë“¤)

---

## Elementì˜ ìƒëª…ì£¼ê¸°

1. **Element ìƒì„±**

   * í”„ë ˆì„ì›Œí¬ê°€ `Widget.createElement()`ë¥¼ í˜¸ì¶œí•˜ì—¬ Elementë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

2. **mount**

   * ìƒˆë¡œ ìƒì„±ëœ Elementë¥¼ ì§€ì •ëœ ë¶€ëª¨ ìŠ¬ë¡¯ì˜ íŠ¸ë¦¬ì— ì¶”ê°€í•˜ê¸° ìœ„í•´ `mount()`ê°€ í˜¸ì¶œë©ë‹ˆë‹¤.
   * ì´ ë©”ì„œë“œëŠ” ìì‹ ìœ„ì ¯ì„ **inflating(ë©”ëª¨ë¦¬ì— ì˜¬ë¦¼)** í•˜ê³ , í•„ìš” ì‹œ `attachRenderObject()`ë¥¼ í˜¸ì¶œí•˜ì—¬ ë Œë” íŠ¸ë¦¬ì— ë Œë” ê°ì²´ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.
   * ì´ ì‹œì ì—ì„œ ElementëŠ” **"active" ìƒíƒœ**ì´ë©°, ìŠ¤í¬ë¦°ì— ë‚˜íƒ€ë‚©ë‹ˆë‹¤.

3. **update**

   * ë¶€ëª¨ê°€ ì´ Elementë¥¼ êµ¬ì„±í•˜ëŠ” ë° ì‚¬ìš©í•œ ìœ„ì ¯ì„ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. (ì˜ˆ: ë¶€ëª¨ê°€ ìƒˆë¡œìš´ ìƒíƒœë¡œ rebuildí•˜ëŠ” ê²½ìš°)
   * ì´ë•Œ í”„ë ˆì„ì›Œí¬ëŠ” `update()`ë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.
   * ìƒˆë¡œìš´ ìœ„ì ¯ì€ í•­ìƒ ì´ì „ì˜ ìœ„ì ¯ê³¼ ê°™ì€ \*\*`runtimeType`ê³¼ `key`\*\*ë¥¼ ê°€ì ¸ì•¼ í•©ë‹ˆë‹¤.
   * ë§Œì•½ ë¶€ëª¨ê°€ íŠ¸ë¦¬ì˜ í•´ë‹¹ ìœ„ì¹˜ì—ì„œ ìœ„ì ¯ì˜ `runtimeType`ì´ë‚˜ `key`ë¥¼ ë³€ê²½í•˜ê³ ì í•œë‹¤ë©´, ì´ Elementë¥¼ `unmount()`í•˜ê³  í•´ë‹¹ ìœ„ì¹˜ì— ìƒˆë¡œìš´ ìœ„ì ¯ì„ inflateí•´ì•¼ í•©ë‹ˆë‹¤.

4. **deactivateChild**

   * ì¡°ìƒì´ ìì‹ Element (í˜¹ì€ ì¤‘ê°„ì˜ ì¡°ìƒ)ë¥¼ íŠ¸ë¦¬ì—ì„œ ì œê±°í•  ê²½ìš° `deactivateChild()`ê°€ í˜¸ì¶œë©ë‹ˆë‹¤.
   * ì´ëŠ” í•´ë‹¹ Elementì˜ ë Œë” ê°ì²´ë¥¼ ë Œë” íŠ¸ë¦¬ì—ì„œ ì œê±°í•˜ê³  `deactivate()`ë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.
   * ì´í›„ `owner`ì˜ **ë¹„í™œì„±í™”ëœ Elements ë¦¬ìŠ¤íŠ¸**ì— ì¶”ê°€ë©ë‹ˆë‹¤.
   * ì´ ì‹œì ì—ì„œ ElementëŠ” **"inactive" ìƒíƒœ**ì…ë‹ˆë‹¤. (ìŠ¤í¬ë¦°ì—ì„œ ì‚¬ë¼ì§)
   * ElementëŠ” í˜„ì¬ **ì• ë‹ˆë©”ì´ì…˜ í”„ë ˆì„ì´ ëë‚  ë•Œê¹Œì§€** inactive ìƒíƒœë¡œ ìœ ì§€ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

5. **ì¬í™œì„±í™” ë˜ëŠ” ì œê±°**

   * ë§Œì•½ Elementê°€ í”„ë ˆì„ì´ ëë‚˜ê¸° ì „ì— íŠ¸ë¦¬ë¡œ **ë‹¤ì‹œ í•©ì³ì§„ë‹¤ë©´**, í”„ë ˆì„ì›Œí¬ëŠ”:

     * `owner`ì˜ ë¹„í™œì„±í™”ëœ Element ë¦¬ìŠ¤íŠ¸ì—ì„œ í•´ë‹¹ Elementë¥¼ ì œê±°í•˜ê³ 
     * `activate()`ë¥¼ í˜¸ì¶œí•˜ì—¬ ë Œë” ê°ì²´ë¥¼ ë‹¤ì‹œ ë Œë” íŠ¸ë¦¬ì— ì¶”ê°€í•©ë‹ˆë‹¤.
   * **í”„ë ˆì„ì´ ëë‚  ë•Œê¹Œì§€ íŠ¸ë¦¬ë¡œ ë³µê·€í•˜ì§€ ëª»í•˜ë©´**, `unmount()`ê°€ í˜¸ì¶œë©ë‹ˆë‹¤.
   * ì´ ì‹œì ì—ì„œ ElementëŠ” **"defunct" ìƒíƒœ**ê°€ ë˜ì–´ íŠ¸ë¦¬ë¡œ ë‹¤ì‹œ ëŒì•„ê°ˆ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

---

## ì£¼ìš” ë©”ì„œë“œ ìš”ì•½

### `mount()`

| ë¼ì¸       | ì„¤ëª…                                                |
| -------- | ------------------------------------------------- |
| 3722\~27 | Elementê°€ ì´ˆê¸°í™”ëœ ìƒíƒœì¸ì§€ í™•ì¸ (widgetì´ nullì¸ì§€, ë¶€ëª¨ê°€ ìˆëŠ”ì§€ ë“±) |
| 3728\~31 | ë©¤ë²„ ë³€ìˆ˜ í• ë‹¹                                          |
| 3732\~37 | ë¶€ëª¨ê°€ ìˆì„ ê²½ìš° `_owner`ë¥¼ ë¶€ëª¨ì˜ `owner`ë¡œ ì„¤ì •               |
| 3738     | í• ë‹¹ëœ `owner`ê°€ nullì¸ì§€ í™•ì¸                            |
| 3739\~42 | keyë¥¼ í• ë‹¹í•˜ê³ , GlobalKeyì¼ ê²½ìš° `owner`ì— ë“±ë¡              |
| 3743     | ë¶€ëª¨ì˜ `InheritedWidgets`ì„ í• ë‹¹                        |
| 3744     | ë¶€ëª¨ì˜ `NotificationNode`ë¥¼ í• ë‹¹                        |

---

### `update()`

| ë¼ì¸       | ì„¤ëª…                                                             |
| -------- | -------------------------------------------------------------- |
| 3763\~69 | Elementê°€ active ìƒíƒœì¸ì§€, widgetì´ nullì¸ì§€, runtimeTypeê³¼ keyê°€ ê°™ì€ì§€ í™•ì¸ |
| 3769     | `canUpdate`: static ë©”ì„œë“œ, `runtimeType`ê³¼ `key`ë¥¼ ë¹„êµ              |
| 3776\~81 | `Forgotten children`ì˜ GlobalKey ì˜ˆì•½ ì œê±°                          |
| 3782     | ìƒˆë¡œìš´ ìœ„ì ¯ìœ¼ë¡œ í• ë‹¹ (ê°±ì‹ )                                               |

---

### `deactivateChild()`

| ë¼ì¸       | ì„¤ëª…                                    |
| -------- | ------------------------------------- |
| 4010\~11 | ìì‹ì´ nullì¸ì§€, ë¶€ëª¨ì™€ í˜„ì¬ ë©”ì„œë“œ ì‹¤í–‰ ì£¼ì²´ê°€ ê°™ì€ì§€ í™•ì¸  |
| 4012     | ìì‹ì˜ ë¶€ëª¨ ì œê±°                             |
| 4013     | Render íŠ¸ë¦¬ì—ì„œ `renderObject` ì œê±° (ì¬ê·€ í˜¸ì¶œ) |
| 4014\~15 | ownerì˜ `inactiveElements`ì— ìì‹ ì¶”ê°€      |

> ğŸ’¬ ì£¼ì„: `"this eventually calls child.deactive()"` â†’ 1969ë¼ì¸ ì°¸ì¡°

---

### `deactivate()`

| ë¼ì¸       | ì„¤ëª…                                       |
| -------- | ---------------------------------------- |
| 4139\~42 | active ìƒíƒœì¸ì§€, widgetê³¼ depthê°€ nullì´ ì•„ë‹Œì§€ í™•ì¸ |
| 4143\~46 | InheritedElementì˜ `_dependents`ì—ì„œ ìì‹  ì œê±°  |
| 4155     | Elementë¥¼ inactive ìƒíƒœë¡œ ë³€ê²½                 |

---

### `unmount()`

| ë¼ì¸       | ì„¤ëª…                                             |
| -------- | ---------------------------------------------- |
| 4186\~89 | inactive ìƒíƒœì¸ì§€, widget, depth, ownerê°€ nullì¸ì§€ í™•ì¸ |
| 4191\~94 | `GlobalKey`ì¸ ê²½ìš°, `unregister` ì‹¤í–‰               |
| 4197\~99 | widget, dependencies ì´ˆê¸°í™”, ìƒíƒœë¥¼ defunctë¡œ ì„¤ì •      |

---

## ìƒì† êµ¬ì¡°

```plaintext
Object
 â””â”€â”€ DiagnosticableTree
      â””â”€â”€ Element
```

---

## ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„

* **BuildContext**

## êµ¬í˜„ì²´

* **ComponentElement**
* **RenderObjectElement**

---

## ìƒì„±ì

```dart
Element(Widget widget)
```

---
