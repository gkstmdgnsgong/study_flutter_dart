// 170p

질문 : "State 객체 생성되자마자 가장 먼저 최초에 한 번 호출됨
때문에 이 함수에는 주로 상탯값을 초기화하는 로직을 작성
예) 최초에 한 번 서버와 연동해 초기 데이터를 가져와 상탯값에 할당하는 코드를 initState()에 작성 가능
State에서 사용하는 다양한 이벤트 처리도 initState() 함수에 작성
이벤트를 처리하는 리스너는 한 번만 등록하고 이후에는 콜백 함수만 반복 호출하면 되므로 주로 initState() 함수에 등록
예) 앱이 화면에 출력되는 순간이나 화면에서 사라지는 순간 이벤트를 처리해야 하면 이 리스너(옵저버)를 initState() 함수에 등록"

여기서 리스너에 대한 설명이 나오지 않아 개념을 설명해줘 또한, "이후에는 콜백 함수만 반복 호출하면 되므로 주로 initState() 함수에 등록 " 해당 부분에서 콜백함수만 반복호출하면 왜 된다는 건지 그리고 어떤 인과관계로 initState() 함수에 등록한다는지 근거를 들어 설명해"

좋은 질문입니다. 말씀하신 내용을 이해하기 위해서는 먼저 **"리스너(listener)", "콜백(callback)", 그리고 `initState()` 함수**의 개념과 관계를 각각 정리하고, 왜 리스너를 `initState()`에 등록하는지 논리적으로 설명해야 합니다.

---

## 🔹 리스너(listener)란?

**리스너**는 말 그대로 **이벤트가 발생하는 것을 "듣고" 있다가 반응하는 함수 또는 객체**입니다.
예를 들어:

* 스크롤 위치가 변할 때마다 무언가를 수행하고 싶을 때
* 텍스트 필드 값이 바뀔 때마다 실시간 반응하고 싶을 때

이럴 때 **변화를 감지해서 반응하는 역할**을 리스너가 수행합니다.

### 예시:

```dart
_scrollController.addListener(() {
  // 스크롤이 바뀔 때마다 실행되는 코드, 콜백함수다
});
```

---

## 🔹 콜백(callback) 함수란?

**콜백 함수**는 **어떤 이벤트가 발생했을 때 실행되는 함수**입니다.
즉, "이벤트가 발생하면 이 함수를 실행해줘!"라고 미리 넘겨놓는 함수입니다.

리스너 안에서 **이벤트가 발생하면 이 콜백 함수를 실행해줘**라는 구조로 동작합니다.

---

## 🔹 왜 `initState()`에 리스너를 등록하나요?

### 💡 핵심 이유:

`initState()`는 **State 객체가 처음 생성될 때 단 한 번만 호출되는 함수**이기 때문에, **이벤트 리스너를 등록할 최적의 장소**입니다.

### 📌 근거와 논리적 흐름:

1. **리스너는 보통 한 번만 등록하면 된다**

   * 예를 들어, 스크롤 위치를 감지하고 싶으면 `ScrollController`에 `.addListener(...)`를 딱 한 번만 호출하면 됨.
   * 리스너는 계속 작동하면서 내부에서 콜백 함수만 호출함 → 즉, **리스너 자체는 다시 등록할 필요 없음**.

2. **그래서 initState()가 적절한 장소다**

   * `build()` 함수는 위젯이 다시 그려질 때마다 여러 번 호출됨 → 여기에 리스너를 넣으면 **중복 등록** 문제가 발생함.
   * `initState()`는 위젯이 처음 만들어질 때 한 번만 실행되므로 **중복 등록 우려 없이 안전하게 리스너를 설정할 수 있음**.

---

## 🔹 "이후에는 콜백 함수만 반복 호출"의 의미

리스너는 "감시자"처럼 동작합니다. 한 번만 등록해두면, **감시 대상에 변화가 생길 때마다 콜백 함수만 실행**됩니다.
즉, 리스너는 계속 살아 있고, 변화가 생길 때마다 콜백을 실행해주는 구조입니다.

### 비유:

* 리스너 = CCTV 카메라 (한 번만 설치하면 계속 감시)
* 콜백 = CCTV가 이상 징후를 감지했을 때 호출하는 경보 시스템

---

## ✅ 요약

| 개념                 | 설명                                      |
| ------------------ | --------------------------------------- |
| **리스너**            | 이벤트(상태 변화 등)를 감지하고 콜백을 실행해주는 함수/객체      |
| **콜백**             | 이벤트 발생 시 실행되는 함수                        |
| **initState()**    | State가 생성될 때 최초 1회 실행 → 리스너 등록에 최적의 위치  |
| **왜 initState()?** | 중복 등록 방지 + 최초 한 번 등록 후 자동 콜백 실행 구조이기 때문 |

---

혹시 어떤 종류의 리스너를 사용할지 고민 중인가요? (예: ScrollController, TextEditingController 등)
